{% extends "layout.html" %}

{% block js %}
  <script>
    let count = 0;

    document.addEventListener('DOMContentLoaded', function () {
      // disable add button
      document.querySelector('#add').disabled = true;
      // loop through ordered list to count the goals
      document.querySelectorAll('.goal-list').forEach(function(li) {
        count++;
        console.log(count);
      });
      // enable submit button when text is entered and goals are less than 25
      document.querySelector('#goal').onkeyup = function () {
        if (document.querySelector('#goal').value.length > 0 && count < 5)
          document.querySelector('#add').disabled = false;
        else
          document.querySelector('#add').disabled = true;
      };
    });
  </script>
{% endblock %}

{% block body %}
  <h2>What are your top 25 career goals?</h2>

  <form action="{{ url_for('create') }}" method="post">
    <input id="goal" type="text" name="goal" placeholder="Enter Goal Here" autocomplete="off" autofocus>
    <button id="add" onclick="count()">Add Goal</button>
  </form>

  <ol id="goals">
    {% for goal in goals %}
      <li class="goal-list">{{ goal }}</li>
    {% endfor %}
  </ol>

  <a href="{{ url_for('logout') }}">Logout</a>
{% endblock %}
